<!-- index.html -->
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>PokèMatch</title>
    <style>
        .center-text {
            text-align: center;
        } 
        
    
        body {
            margin: 0;
            font-family: Arial, sans-serif;
            background-color: rgb(158, 15, 15);
            display:flex;
            justify-content: center;
            align-items: center;
            height: 100vh;
        }
        
        button img {
            border: none;
            background: none;
            padding: 0;
        }

        button {
            border: none;
            background: none;
            padding: 0;
            cursor: pointer;
            transition: transform 0.1, opacity 0.1;
            margin: 0 5px;
        }

        button:active {
            transform: scale(0.95);
            opacity: 0.8;
        }

        button:hover img {
            filter: brightness(0.9);
        }  
        
        .main-container{
            position:relative;
        }

        .main-layout{
            width: 100%;
            margin: 0 auto;
            border: 1px solid #ddd;
            border-radius: 10px;
            background-color: white;
            box-shadow: 0 4px 8px rgba(0,0,0,0.2);
        }
        
        .header-container{
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-top: 0;
            padding: 10px;
            max-width: 100%;
        }

        .logo img{
            width:100px;
            height:auto;
        }

        .pokemon-container{
            display:flex;
            position: relative;
            flex-direction:column;
            align-items: center;
            justify-content: center;
            margin-top: 10px;
            height: 83.5vh;
            width: 33vw;
        }
        .pokemon-container .pokemon-image{
            position: relative;
            width: 100%;
            max-width: 45vh;
            max-height: 33vw;
            border-radius: 2px;
        }

        .pokemon-container .pokemon-nature{
            position: absolute;
            top: 10px;
            right:10px;
            width: 80px;
            height: auto;
            z-index: 2;
            pointer-events: none;
        }

        .pokemon-name{
            font-weight: bold;
            font-size: 20px;
            color:black;
        }

        .pokemon-type{
            font-size: 16px;
            color:rgb(77, 77, 77);
        }

        .pokemon-info{
            font-size: 14px;
            color: #888;
            text-align:left;
            width: 95%;
            margin-bottom: 10px;
            padding:0 10px;
        }
        
        .profile-image{
            display: block;
            width: 7.5vw;
            height: 15vh;
            border-radius: 50%;
            object-fit: cover;
            margin: 0 auto 10px;
            border: 2px solid #ddd;
            cursor: pointer;
        }

        .grid-container{
            display: grid;
            width: 30vw;
            background-color: white;
            border:1px solid #ccc;
            border-radius: 1.5%;
            cursor: pointer;
            padding: 4px;

        }
        .type-buttons{
            margin: 1px;
            padding: 2px;
            cursor: pointer;
        }

        .type-buttons.selected{
            transform: scale(1.1);
            filter: brightness(0.5);
        }

        .nature-buttons{
            margin: 1px;
            padding: 2px;
            cursor: pointer;
        }

        .nature-buttons.selected{
            transform: scale(1.1);
            filter: brightness(0.5);
        }

        #imageUpload {
            display: none;
        }
        
        #loginForm{
            align-items: center;
        }

        #createUserForm{
            display: none;
        }
        
        #passwordInputForm{
            display: none;
        }

        #messagesForm {
            position: absolute;
            right: 0.75vw;
            width: 31vw;
            height: 94.5vh;
            text-align: left;
            background-color: white;
            padding:5px;
            border: 1px solid #ddd;
            border-radius:10px;
            display: none;
            box-shadow: 0 4px 8px rgba(0,0,0,0.2);
        }

        #profileInputForm {
            position: absolute;
            right: 0.75vw;
            width: 31vw;
            height: 94.5vh;
            text-align: left;
            background-color: white;
            padding:5px;
            border: 1px solid #ddd;
            border-radius:10px;
            display: none;
            box-shadow: 0 4px 8px rgba(0,0,0,0.2);
        }

        #profileForm {
            position: absolute;
            left: 0.95vw;
            width: 31vw;
            height: 94.5vh;
            text-align: left;
            background-color: white;
            padding:5px;
            border: 1px solid #ddd;
            border-radius:10px;
            display: none;
            box-shadow: 0 4px 8px rgba(0,0,0,0.2);
        }

        #messagesForm input, #messagesForm textarea, #profileForm input, #profileForm textarea {
            width: 96%;
            margin-bottom: 10px;
            padding: 8px;
            border: 1px solid #ddd;
            border-radius: 5px;
        }

        #profileForm button{
            padding-top:5px;
        }

    </style>    
</head>
<body>
    <!-- Main Layout-->
    <div class ="main-container"> 
        <div class="main-layout">
            <!-- Header -->
            <div class="header-container">
                <button id="settingsButton"><img src = "images/settings.png" alt="Settings" width="50" height="50"></button>
                <div class = "center-header"><img src="images/pokematch_logo.png" alt="Logo" width="225" height="45"></div>
                <button id="messagesButton"><img src="images/messages.png" alt="Like Button" width="50" height="50"></button>
            </div>

            <!-- Pokemon Information -->
            <div class="pokemon-container">
                <div class="empty-state">Loading Pokémon data...</div>
                    <img class="pokemon-image" src="" alt="Pokémon Image" width="350" height="350">
                    <img class = "pokemon-nature" src="images/pokenatures/adamant.png" alt="pokemonNatureTemp" class="overlay">
                <div class="pokemon-info">
                    <div id="pokemonName" class="pokemon-name"></div>
                    <div id="pokemonType" class="pokemon-type"></div>
                    <div id="pokemonNature" class = "pokemon-nature"></div>
                    <div id="pokemonAbility" class="pokemon-ability"></div>
                </div>
                <!-- Dislike/Like Buttons -->
                <div>
                    <button id="dislikeButton"><img src="images/dislike_button.png" alt="Dislike Button" width="85" height="85"></button>
                    <button id="likeButton"><img src="images/like_button.png" alt="Like Button" width="85" height="85"></button>
                </div>
            </div>
        </div>
    </div>
    
    <!-- Messaging Container -->
    <div id="messagesForm" class="center-text">
        <input type="text" id="username" placeholder="This will eventually have messages" />
    </div>

    <!-- Profile Layout -->
    <div id="profileForm" class="center-text">
        
        <!--Profile Setup/Login-->
        <div id="loginForm" class="center-text">
            <h3 id = "loginText">Welcome to Pokematch! Register or Login to start matching.<h3> 
            <button id="registerUserButton"><img src = "images/register_button.png" alt="Register User" width="100" height="35"></button>
            <button id="loginButton"><img src = "images/login.png" alt="Login" width="100" height="35"></button>
        </div>

        <!-- Profile Image Upload & Input Fields for Profile Creation -->
        <div id="createUserForm">
            <img id="profileImage" class="profile-image" src="images/default_profile.png" alt="Profile Image">
            <input type="file" id="imageUpload" accept="image/*">
            <input type="text" id="createUserName" placeholder="Enter your name" />
            <input type="text" id="createUserPassword" placeholder="Enter your password" />
            <textarea id="bioProfile" placeholder="Enter your bio" rows="2"></textarea>
            <!--Pokemon Types-->
            <div class = "grid-container" onclick = "toggleGrid()">
                Choose 3 Types:
                <div id = "grid-content">
                    <button class = "type-buttons" data-type = "bug"><img src = "images/poketypes/bug.png"  alt = "Bug"  width = "50" height = "17.5" ></button>
                    <button class = "type-buttons" data-type = "dark"><img src = "images/poketypes/dark.png"  alt = "Dark"  width = "50" height = "17.5" ></button>
                    <button class = "type-buttons" data-type = "dragon"><img src = "images/poketypes/dragon.png"  alt = "Dragon"  width = "50" height = "17.5" ></button>
                    <button class = "type-buttons" data-type = "electric"><img src = "images/poketypes/electric.png"  alt = "Electric"  width = "50" height = "17.5" ></button>
                    <button class = "type-buttons" data-type = "fairy"><img src = "images/poketypes/fairy.png"  alt = "Fairy"  width = "50" height = "17.5" ></button>
                    <button class = "type-buttons" data-type = "fighting"><img src = "images/poketypes/fighting.png"  alt = "Fighting"  width = "50" height = "17.5" ></button>
                    <button class = "type-buttons" data-type = "fire"><img src = "images/poketypes/fire.png"  alt = "Fire"  width = "50" height = "17.5" ></button>
                    <button class = "type-buttons" data-type = "flying"><img src = "images/poketypes/flying.png"  alt = "Flying"  width = "50" height = "17.5" ></button>
                    <button class = "type-buttons" data-type = "ghost"><img src = "images/poketypes/ghost.png"  alt = "Ghost"  width = "50" height = "17.5" ></button>
                    <button class = "type-buttons" data-type = "grass"><img src = "images/poketypes/grass.png"  alt = "Grass"  width = "50" height = "17.5" ></button>
                    <button class = "type-buttons" data-type = "ground"><img src = "images/poketypes/ground.png"  alt = "Ground"  width = "50" height = "17.5" ></button>
                    <button class = "type-buttons" data-type = "ice"><img src = "images/poketypes/ice.png"  alt = "Ice"  width = "50" height = "17.5" ></button>
                    <button class = "type-buttons" data-type = "normal"><img src = "images/poketypes/normal.png"  alt = "Normal"  width = "50" height = "17.5" ></button>
                    <button class = "type-buttons" data-type = "poison"><img src = "images/poketypes/poison.png"  alt = "Poison"  width = "50" height = "17.5" ></button>
                    <button class = "type-buttons" data-type = "psychic"><img src = "images/poketypes/psychic.png"  alt = "Psychic"  width = "50" height = "17.5" ></button>
                    <button class = "type-buttons" data-type = "rock"><img src = "images/poketypes/rock.png"  alt = "Rock"  width = "50" height = "17.5" ></button>
                    <button class = "type-buttons" data-type = "steel"><img src = "images/poketypes/steel.png"  alt = "Steel"  width = "50" height = "17.5" ></button>
                    <button class = "type-buttons" data-type = "water"><img src = "images/poketypes/water.png"  alt = "Water"  width = "50" height = "17.5" ></button>
                </div>
            </div>
            <!--Pokemon Natures-->
            <div class = "grid-container" onclick = "toggleGrid()">
            Choose 3 Natures:
                <div id = "grid-content">
                    <button class = "nature-buttons" data-type = "adamant"><img src = "images/pokenatures/adamant.png"  alt = "Adamant"  width = "50"  height = "17.5"></button>
                    <button class = "nature-buttons" data-type = "bashful"><img src = "images/pokenatures/bashful.png"  alt = "Bashful"  width = "50"  height = "17.5"></button>
                    <button class = "nature-buttons" data-type = "bold"><img src = "images/pokenatures/bold.png"  alt = "Bold"  width = "50"  height = "17.5"></button>
                    <button class = "nature-buttons" data-type = "brave"><img src = "images/pokenatures/brave.png"  alt = "Brave"  width = "50"  height = "17.5"></button>
                    <button class = "nature-buttons" data-type = "calm"><img src = "images/pokenatures/calm.png"  alt = "Calm"  width = "50"  height = "17.5"></button>
                    <button class = "nature-buttons" data-type = "careful"><img src = "images/pokenatures/careful.png"  alt = "Careful"  width = "50"  height = "17.5"></button>
                    <button class = "nature-buttons" data-type = "docile"><img src = "images/pokenatures/docile.png"  alt = "Docile"  width = "50"  height = "17.5"></button>
                    <button class = "nature-buttons" data-type = "gentle"><img src = "images/pokenatures/gentle.png"  alt = "Gentle"  width = "50"  height = "17.5"></button>
                    <button class = "nature-buttons" data-type = "hardy"><img src = "images/pokenatures/hardy.png"  alt = "Hardy"  width = "50"  height = "17.5"></button>
                    <button class = "nature-buttons" data-type = "hasty"><img src = "images/pokenatures/hasty.png"  alt = "Hasty"  width = "50"  height = "17.5"></button>
                    <button class = "nature-buttons" data-type = "impish"><img src = "images/pokenatures/impish.png"  alt = "Impish"  width = "50"  height = "17.5"></button>
                    <button class = "nature-buttons" data-type = "jolly"><img src = "images/pokenatures/jolly.png"  alt = "Jolly"  width = "50"  height = "17.5"></button>
                    <button class = "nature-buttons" data-type = "lax"><img src = "images/pokenatures/lax.png"  alt = "Lax"  width = "50"  height = "17.5"></button>
                    <button class = "nature-buttons" data-type = "lonely"><img src = "images/pokenatures/lonely.png"  alt = "Lonely"  width = "50"  height = "17.5"></button>
                    <button class = "nature-buttons" data-type = "mild"><img src = "images/pokenatures/mild.png"  alt = "Mild"  width = "50"  height = "17.5"></button>
                    <button class = "nature-buttons" data-type = "modest"><img src = "images/pokenatures/modest.png"  alt = "Modest"  width = "50"  height = "17.5"></button>
                    <button class = "nature-buttons" data-type = "naive"><img src = "images/pokenatures/naive.png"  alt = "Naive"  width = "50"  height = "17.5"></button>
                    <button class = "nature-buttons" data-type = "naughty"><img src = "images/pokenatures/naughty.png"  alt = "Naughty"  width = "50"  height = "17.5"></button>
                    <button class = "nature-buttons" data-type = "quiet"><img src = "images/pokenatures/quiet.png"  alt = "Quiet"  width = "50"  height = "17.5"></button>
                    <button class = "nature-buttons" data-type = "quirky"><img src = "images/pokenatures/quirky.png"  alt = "Quirky"  width = "50"  height = "17.5"></button>
                    <button class = "nature-buttons" data-type = "rash"><img src = "images/pokenatures/rash.png"  alt = "Rash"  width = "50"  height = "17.5"></button>
                    <button class = "nature-buttons" data-type = "relaxed"><img src = "images/pokenatures/relaxed.png"  alt = "Relaxed"  width = "50"  height = "17.5"></button>
                    <button class = "nature-buttons" data-type = "sassy"><img src = "images/pokenatures/sassy.png"  alt = "Sassy"  width = "50"  height = "17.5"></button>
                    <button class = "nature-buttons" data-type = "serious"><img src = "images/pokenatures/serious.png"  alt = "Serious"  width = "50"  height = "17.5"></button>
                    <button class = "nature-buttons" data-type = "timid"><img src = "images/pokenatures/timid.png"  alt = "Timid"  width = "50"  height = "17.5"></button>
                </div>
            </div>
            <button id="createUserButton"><img src = "images/create_user.png" alt="Create User" width="75" height="26.25"></button>
            <button id="backButtonCreateUser"><img src = "images/back_button.png" alt="Back Button" width="75" height="26.25"></button>
        </div>
        <!-- Input Fields for Login -->
        <div id="passwordInputForm" class="center-text">
            <input type="text" id="loginUsername" placeholder="Enter your username" />
            <input type="text" id="loginPassword" placeholder="Enter your password" />
            <button id="passwordLoginButton"><img src = "images/login.png" alt="Login" width="75" height="26.25"></button>
            <button id="backButtonPassword"><img src = "images/back_button.png" alt="Back Button Password" width="75" height="26.25"></button>
            <div class="loginMessage" style="display:none; color: green;">User logged in successfully!</div>
        </div>
    </div>
        
    <script src="renderer.js"></script>
    <script>
        const settingsButton = document.getElementById("settingsButton");
        const messagesForm = document.getElementById("messagesForm");
        const messagesButton = document.getElementById("messagesButton");
        const profileForm = document.getElementById("profileForm");
        const imageUpload = document.getElementById('imageUpload');
        const profileImage = document.getElementById('profileImage');
        const registerUserButton = document.getElementById('registerUserButton');
        const loginButton = document.getElementById('loginButton');
        const createUserForm = document.getElementById('createUserForm');
        const passwordInputForm = document.getElementById('passwordInputForm');
        const backButtonPassword = document.getElementById('backButtonPassword');
        const backButtonCreateUser = document.getElementById('backButtonCreateUser');
        const loginForm = document.getElementById('loginForm');
        const createUserButton = document.getElementById('createUserButton');
        const loginText = document.getElementById('loginText');
        const typeButtons = document.querySelectorAll('.type-buttons');
        const natureButtons = document.querySelectorAll('.nature-buttons');
        let typeSelectedCount = 0;
        const typeMaxSelections = 3;
        let natureSelectedCount = 0;
        const natureMaxSelections = 3;

        // Settings Button setup
        settingsButton.addEventListener("click", () => {
            // If profile is not showing, display. Else, remove display.
            if (profileForm.style.display === "none" || profileForm.style.display === "") {
                profileForm.style.display = "block";
            } else {
                profileForm.style.display = "none";
            }
        });

        // Messages Button Setup
        messagesButton.addEventListener("click", () => {
            // If temp input is not showing, display. Else, remove display.
            if (messagesForm.style.display === "none" || messagesForm.style.display === "") {
                messagesForm.style.display = "block";
            } else {
                messagesForm.style.display = "none";
            }
        });
        
        // Check if profile image was clicked
        profileImage.addEventListener("click", () => {
            imageUpload.click();  
        });

        // If clicked allow user to update with a image file
        imageUpload.addEventListener("change", (event) => {
            const file = event.target.files[0];
            if (file) {
                const reader = new FileReader();
                reader.onload = (e) => {
                    profileImage.src = e.target.result;  
                };
                reader.readAsDataURL(file);
            }
        });
        
        // Register Button Setup
        registerUserButton.addEventListener("click", () => {
            // If clicked, remove create user button & login button.
            // Then display the create user form in the profile container
            registerUserButton.style.display = "none";
            loginButton.style.display = "none";
            loginText.style.display = "none";
            createUserForm.style.display = "block";
        });

        // Login Button Setup
        loginButton.addEventListener("click", () => {
            // If clicked, remove create user button & login button.
            // Then display the password input form in the profile container
            registerUserButton.style.display = "none";
            loginButton.style.display = "none";
            loginText.style.display = "none";
            passwordInputForm.style.display = "block";
        });
        
        // Back Button Password Setup
        backButtonPassword.addEventListener("click", () => {
            passwordInputForm.style.display = "none";
            loginForm.style.display = "block";
            loginText.style.display = "block";
            loginButton.style.display = "inline";
            registerUserButton.style.display = "inline";
        });

        // Back Button Create User Setup
        backButtonCreateUser.addEventListener("click", () => {
            createUserForm.style.display = "none";
            loginForm.style.display = "block";
            loginText.style.display = "block";
            loginButton.style.display = "inline";
            registerUserButton.style.display = "inline";
        });

        typeButtons.forEach(button =>{
            button.addEventListener('click',() => {
                if(button.classList.contains('selected')){
                    button.classList.remove('selected');
                    typeSelectedCount--;
                } else {
                    if (typeSelectedCount < typeMaxSelections){
                        button.classList.add('selected');
                        typeSelectedCount++;
                    } else {
                        alert('You can only select 3!');
                    }
                }
            });
        });
        
        natureButtons.forEach(button =>{
            button.addEventListener('click',() => {
                if(button.classList.contains('selected')){
                    button.classList.remove('selected');
                    natureSelectedCount--;
                } else {
                    if (natureSelectedCount < natureMaxSelections){
                        button.classList.add('selected');
                        natureSelectedCount++;
                    } else {
                        alert('You can only select 3!');
                    }
                }
            });
        });
    </script>
</body>
</html>